<html>

<head>
    <title>edit</title>
</head>

<body>

    <form id="form" action="/edit_db" method="post">
        id:<br><select name="id" id="select_id">

        </select><br>
    </form>
</body>
<script>
    //global vars--------------


    //global functions-----------------------
    function fillForm(menu) {

        var ifs = {
            "direct": {
                "number": "number",
                "text": "text",
                "date": "date"
            },
            "not direct": {
                "option": (key) => {
                    out = key + ':<br><select name="' + key + '"><option value="project">project</option>'
                    out += '<option value="blog post">blog post</option>blog post</select><br>'
                    return out
                },
                "search": (key) => {
                    out = key + ":<br><input name='" + key + "' type='text' placeholder='separate tags with comma' ><br>"
                    return out
                },
                "textarea": (key) => {
                    out = key + ':<br><textarea name ="' + key + '"></textarea><br>'
                    return out
                }
            }
        }


        var form = document.getElementById("form")
        var html = ""
        for (key in menu) {
            if (menu[key]["type"] == ifs["direct"][menu[key]["type"]]) {
                html += key + ":<br><input name='" + key + "' type='" + menu[key]["type"] + "' ><br>"
            } else {
                html += ifs["not direct"][menu[key]["type"]](key)
            }
        }
        html += "<br><input type='submit' value='Submit'>"
        form.innerHTML = html
    }
    async function getIds() {
        //let response = await fetch('/getDbIds',{method:"POST",body:data});
        let response = await fetch('getDbIds');
        let val = await response.json();
        return val
    }

    async function fillSelectBox() {
        var ids = await getIds()
        var select = document.getElementById("select_id")
        if (ids.length > 0) {
            var options = ""
            for (value in ids) {
                options += '<option value="' + value + '">' + value + '</option>'
            }
            select.innerHTML = options
        }
    }
    //Main-------------------    
    //fillForm(menu)
    fillSelectBox()

</script>

</html>
